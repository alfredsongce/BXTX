# 🎯 可视化技能系统使用说明

## 📋 系统概述

新的可视化技能系统提供了直观的鼠标操作界面，替代了原有的按钮式技能选择。玩家可以通过鼠标直接在战场上选择技能目标和释放技能。

## 🎮 操作流程

### 1. 技能选择阶段
- 选择"技能"行动后，会显示技能选择面板
- 点击想要使用的技能按钮，或使用数字键1-9快速选择
- 面板会显示技能的MP消耗和可用状态

### 2. 可视化释放阶段
选择技能后，界面会切换到可视化释放模式：

#### 🎨 视觉指示
- **蓝色圆圈**：显示技能的施法范围
- **绿色高亮**：范围内的合法目标
- **红色高亮**：范围内的非法目标（不能攻击的目标）
- **白色圆圈**：跟随鼠标的指示器
- **橙色范围预览**：鼠标悬停时显示的技能效果范围

#### 🖱️ 鼠标操作
- **鼠标移动**：查看技能范围和效果预览
- **左键点击**：确认释放技能
- **右键点击**：取消技能释放，返回技能选择
- **ESC键**：取消技能释放

#### 📱 顶部HUD
- 显示当前施法者和技能名称
- 根据技能类型显示操作提示
- 显示取消操作的快捷键提示

## 🎯 技能类型支持

### 1. 自身技能 (SELF)
- **单体自身**：点击任意位置对自己释放
- **范围自身**：以自己为中心的范围效果，点击任意位置释放

### 2. 普通技能 (NORMAL)
- **单体目标**：点击蓝色范围内的合法目标
- **范围目标**：点击目标后影响其周围的范围，鼠标悬停可预览效果范围

### 3. 弹道技能 (PROJECTILE)
- **单点弹道**：点击目标发射弹道
- **穿刺弹道**：发射穿透路径上所有目标的弹道

### 4. 自由技能 (FREE)
- **自由单体**：点击蓝色范围内的任意位置
- **自由范围**：点击位置后影响周围范围，鼠标移动可预览效果范围

## 🎨 目标类型颜色编码

| 目标类型 | 高亮颜色 | 说明 |
|---------|----------|------|
| 友方 (ALLY) | 绿色 | 可以治疗和增益的友方单位 |
| 敌方 (ENEMY) | 绿色 | 可以攻击的敌方单位 |
| 友方专用 (ALLYONLY) | 绿色 | 只能对友方（不包括自己）使用 |
| 无视敌我 (ALL) | 绿色 | 对所有单位都有效 |
| 非法目标 | 红色 | 不能对其使用该技能的目标 |

## ⌨️ 快捷键说明

| 快捷键 | 功能 |
|--------|------|
| 1-9 | 快速选择对应序号的技能 |
| ESC | 取消当前操作 |
| 左键 | 确认选择/释放 |
| 右键 | 取消/返回上一步 |

## 🔧 系统特性

### 🎨 视觉效果
- 平滑的鼠标跟随指示器
- 实时的效果范围预览
- 清晰的目标高亮显示
- 优雅的圆圈绘制效果

### 🚀 性能优化
- 高效的鼠标位置检测
- 智能的视觉效果缓存
- 及时的资源清理

### 🎮 用户体验
- 直观的操作流程
- 清晰的视觉反馈
- 详细的操作提示
- 流畅的状态切换

## 🛠️ 开发者信息

### 核心组件
- `VisualSkillCaster.gd` - 可视化技能释放核心逻辑
- `VisualSkillSelector.gd` - 技能选择器界面
- `SkillCastingHUD.gd` - 技能释放时的HUD显示

### 集成方式
- 替换了原有的 `SkillSelectionMenu` 和 `TargetSelectionMenu`
- 与现有的 `SkillManager` 和 `BattleScene` 无缝集成
- 保持与原有信号系统的兼容性

### 扩展性
- 支持新增技能类型
- 可自定义视觉效果样式
- 易于添加新的交互方式

## 🎯 使用建议

1. **新手玩家**：建议先使用简单的单体技能熟悉操作
2. **进阶玩家**：利用鼠标悬停预览来精确规划范围技能
3. **快速操作**：熟练后可使用数字键快速选择技能 